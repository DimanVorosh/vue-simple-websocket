{"version":3,"file":"VueSimpleWebSocket.module.js","sources":["../src/WebSocketClient.js","../src/Main.js"],"sourcesContent":["export default class WebSocketClient {\n  constructor (url, options) {\n    this.instance = null\n    this.url = url\n    this.options = options || this.defaultOptions()\n    if (this.options) {\n      this.reconnectEnabled = options.reconnectEnabled || false\n      if (this.reconnectEnabled) {\n        this.reconnectInterval = options.reconnectInterval\n      }\n    }\n    // These methods should be defined by components\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n\n  defaultOptions () {\n    return {\n      reconnectEnabled: false,\n      reconnectInterval: 0\n    }\n  }\n\n  connect () {\n    this.instance = new WebSocket(this.url)\n\n    // Socket event listeners\n    // Each event handler also calls the corresponding class method, which can be defined by the component\n    this.instance.onopen = () => {\n      if (typeof this.onOpen === 'function') {\n        this.onOpen()\n      }\n    }\n    this.instance.onmessage = (msg) => {\n      if (typeof this.onMessage === 'function') {\n        this.onMessage(msg)\n      }\n    }\n    this.instance.onclose = (evt) => {\n      if (typeof this.onClose === 'function') {\n        this.onClose(evt)\n      }\n      if (!evt.wasClean && this.reconnectEnabled) {\n        this.reconnect()\n      }\n    }\n    this.instance.onerror = (evt) => {\n      if (typeof this.onError === 'function') {\n        this.onError(evt)\n      }\n    }\n  }\n\n  reconnect () {\n    delete this.instance\n    setTimeout(() => {\n      this.connect()\n    }, this.reconnectInterval)\n  }\n\n  sendObj (data) {\n    this.instance.send(JSON.stringify(data))\n  }\n\n  removeListeners () {\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n}\n","import WebSocketClient from './WebSocketClient'\n\nexport default {\n\n  install (Vue, connection, options) {\n    const socketClient = new WebSocketClient(connection, options)\n    socketClient.connect()\n    Vue.prototype.$socketClient = socketClient\n  }\n\n}\n"],"names":[],"mappings":"AAAe,MAAM,eAAe,CAAC;EACnC,WAAW,CAAC,CAAC,GAAG,EAAE,OAAO,EAAE;IACzB,IAAI,CAAC,QAAQ,GAAG,KAAI;IACpB,IAAI,CAAC,GAAG,GAAG,IAAG;IACd,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,IAAI,CAAC,cAAc,GAAE;IAC/C,IAAI,IAAI,CAAC,OAAO,EAAE;MAChB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,MAAK;MACzD,IAAI,IAAI,CAAC,gBAAgB,EAAE;QACzB,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,kBAAiB;OACnD;KACF;;IAED,IAAI,CAAC,MAAM,GAAG,KAAI;IAClB,IAAI,CAAC,SAAS,GAAG,KAAI;IACrB,IAAI,CAAC,OAAO,GAAG,KAAI;IACnB,IAAI,CAAC,OAAO,GAAG,KAAI;GACpB;;EAED,cAAc,CAAC,GAAG;IAChB,OAAO;MACL,gBAAgB,EAAE,KAAK;MACvB,iBAAiB,EAAE,CAAC;KACrB;GACF;;EAED,OAAO,CAAC,GAAG;IACT,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC;;;;IAIvC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM;MAC3B,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,UAAU,EAAE;QACrC,IAAI,CAAC,MAAM,GAAE;OACd;MACF;IACD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,CAAC,GAAG,KAAK;MACjC,IAAI,OAAO,IAAI,CAAC,SAAS,KAAK,UAAU,EAAE;QACxC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAC;OACpB;MACF;IACD,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG,KAAK;MAC/B,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,UAAU,EAAE;QACtC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAC;OAClB;MACD,IAAI,CAAC,GAAG,CAAC,QAAQ,IAAI,IAAI,CAAC,gBAAgB,EAAE;QAC1C,IAAI,CAAC,SAAS,GAAE;OACjB;MACF;IACD,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG,KAAK;MAC/B,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,UAAU,EAAE;QACtC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAC;OAClB;MACF;GACF;;EAED,SAAS,CAAC,GAAG;IACX,OAAO,IAAI,CAAC,SAAQ;IACpB,UAAU,CAAC,MAAM;MACf,IAAI,CAAC,OAAO,GAAE;KACf,EAAE,IAAI,CAAC,iBAAiB,EAAC;GAC3B;;EAED,OAAO,CAAC,CAAC,IAAI,EAAE;IACb,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC;GACzC;;EAED,eAAe,CAAC,GAAG;IACjB,IAAI,CAAC,MAAM,GAAG,KAAI;IAClB,IAAI,CAAC,SAAS,GAAG,KAAI;IACrB,IAAI,CAAC,OAAO,GAAG,KAAI;IACnB,IAAI,CAAC,OAAO,GAAG,KAAI;GACpB;CACF;;ACtED,WAAe;;EAEb,OAAO,CAAC,CAAC,GAAG,EAAE,UAAU,EAAE,OAAO,EAAE;IACjC,MAAM,YAAY,GAAG,IAAI,eAAe,CAAC,UAAU,EAAE,OAAO,EAAC;IAC7D,YAAY,CAAC,OAAO,GAAE;IACtB,GAAG,CAAC,SAAS,CAAC,aAAa,GAAG,aAAY;GAC3C;;CAEF;;;;"}