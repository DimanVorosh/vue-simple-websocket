{"version":3,"file":"VueSimpleWebSocket.module.js","sources":["../src/WebSocketClient.js","../src/Main.js"],"sourcesContent":["export default class WebSocketClient {\n  constructor (url, options) {\n    this.instance = null\n    this.url = url\n    this.options = options || this.defaultOptions()\n    if (this.options) {\n      this.reconnectEnabled = options.reconnectEnabled || false\n      if (this.reconnectEnabled) {\n        this.reconnectInterval = options.reconnectInterval\n      }\n    }\n    // These methods should be defined by components\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n\n  defaultOptions () {\n    return {\n      reconnectEnabled: false,\n      reconnectInterval: 0\n    }\n  }\n\n  connect () {\n    this.instance = new WebSocket(this.url)\n\n    // Socket event listeners\n    // Each event handler also calls the corresponding class method, which can be defined by the component\n    this.instance.onopen = () => {\n      if (typeof this.onOpen === 'function') {\n        this.onOpen()\n      }\n    }\n    this.instance.onmessage = (msg) => {\n      if (typeof this.onMessage === 'function') {\n        this.onMessage(msg)\n      }\n    }\n    this.instance.onclose = (evt) => {\n      if (typeof this.onClose === 'function') {\n        this.onClose(evt)\n      }\n      if (!evt.wasClean && this.reconnectEnabled) {\n        this.reconnect()\n      }\n    }\n    this.instance.onerror = (evt) => {\n      if (typeof this.onError === 'function') {\n        this.onError(evt)\n      }\n    }\n  }\n\n  reconnect () {\n    delete this.instance\n    setTimeout(() => {\n      this.connect()\n    }, this.reconnectInterval)\n  }\n\n  sendObj (data) {\n    this.instance.send(JSON.stringify(data))\n  }\n\n  removeListeners () {\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n}\n","import WebSocketClient from './WebSocketClient'\n\nexport default {\n\n  install (Vue, connection, options) {\n    const socketClient = new WebSocketClient(connection, options)\n    socketClient.connect()\n    Vue.prototype.$socketClient = socketClient\n  }\n\n}\n"],"names":["WebSocketClient","constructor","url","options","instance","defaultOptions","reconnectEnabled","reconnectInterval","onOpen","onMessage","onClose","onError","connect","WebSocket","onopen","onmessage","msg","onclose","evt","wasClean","reconnect","onerror","setTimeout","sendObj","data","send","JSON","stringify","removeListeners","install","Vue","connection","socketClient","prototype","$socketClient"],"mappings":"AAAe,KAAMA,CAAAA,eAAgB,CACnCC,WAAW,CAAEC,CAAF,CAAOC,CAAP,CAAgB,CACzB,KAAKC,QAAL,CAAgB,IADS,CAEzB,KAAKF,GAAL,CAAWA,CAFc,CAGzB,KAAKC,OAAL,CAAeA,CAAO,EAAI,KAAKE,cAAL,EAHD,CAIrB,KAAKF,OAJgB,GAKvB,KAAKG,gBAAL,CAAwBH,CAAO,CAACG,gBAAR,IALD,CAMnB,KAAKA,gBANc,GAOrB,KAAKC,iBAAL,CAAyBJ,CAAO,CAACI,iBAPZ,GAWzB,KAAKC,MAAL,CAAc,IAXW,CAYzB,KAAKC,SAAL,CAAiB,IAZQ,CAazB,KAAKC,OAAL,CAAe,IAbU,CAczB,KAAKC,OAAL,CAAe,IAChB,CAEDN,cAAc,EAAI,CAChB,MAAO,CACLC,gBAAgB,GADX,CAELC,iBAAiB,CAAE,CAFd,CAIR,CAEDK,OAAO,EAAI,CACT,KAAKR,QAAL,CAAgB,GAAIS,CAAAA,SAAJ,CAAc,KAAKX,GAAnB,CADP,CAKT,KAAKE,QAAL,CAAcU,MAAd,CAAuB,IAAM,CACA,UAAvB,QAAO,MAAKN,MADW,EAEzB,KAAKA,MAAL,GAPK,CAUT,KAAKJ,QAAL,CAAcW,SAAd,CAA2BC,CAAD,EAAS,CACH,UAA1B,QAAO,MAAKP,SADiB,EAE/B,KAAKA,SAAL,CAAeO,CAAf,EAZK,CAeT,KAAKZ,QAAL,CAAca,OAAd,CAAyBC,CAAD,EAAS,CACH,UAAxB,QAAO,MAAKR,OADe,EAE7B,KAAKA,OAAL,CAAaQ,CAAb,CAF6B,CAI3B,CAACA,CAAG,CAACC,QAAL,EAAiB,KAAKb,gBAJK,EAK7B,KAAKc,SAAL,GApBK,CAuBT,KAAKhB,QAAL,CAAciB,OAAd,CAAyBH,CAAD,EAAS,CACH,UAAxB,QAAO,MAAKP,OADe,EAE7B,KAAKA,OAAL,CAAaO,CAAb,EAGL,CAEDE,SAAS,EAAI,CACX,MAAO,MAAKhB,QADD,CAEXkB,UAAU,CAAC,IAAM,CACf,KAAKV,OAAL,EACD,CAFS,CAEP,KAAKL,iBAFE,CAGX,CAEDgB,OAAO,CAAEC,CAAF,CAAQ,CACb,KAAKpB,QAAL,CAAcqB,IAAd,CAAmBC,IAAI,CAACC,SAAL,CAAeH,CAAf,CAAnB,CACD,CAEDI,eAAe,EAAI,CACjB,KAAKpB,MAAL,CAAc,IADG,CAEjB,KAAKC,SAAL,CAAiB,IAFA,CAGjB,KAAKC,OAAL,CAAe,IAHE,CAIjB,KAAKC,OAAL,CAAe,IAChB,CAvEkC,CCErC,SAAe,CAEbkB,OAAO,CAAEC,CAAF,CAAOC,CAAP,CAAmB5B,CAAnB,CAA4B,CACjC,KAAM6B,CAAAA,CAAY,CAAG,GAAIhC,CAAAA,eAAJ,CAAoB+B,CAApB,CAAgC5B,CAAhC,CAArB,CACA6B,CAAY,CAACpB,OAAb,EAFiC,CAGjCkB,CAAG,CAACG,SAAJ,CAAcC,aAAd,CAA8BF,CAC/B,CANY,CAAf"}